# Development Dockerfile for Backend
FROM ballerina/ballerina:latest

WORKDIR /app

# Copy source code
COPY . .

# Build the application (ignore target directory issues for dev)
RUN bal build || echo "Build warning ignored for development"

# Expose port
EXPOSE 9090

# Health check
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:9090/health || exit 1

# Start development server with auto-reload
CMD ["bal", "run", "--debug", "9091"]file for Backend
FROM ballerina/ballerina:latest

WORKDIR /app

# Copy source code first
COPY . .

# Build the application in a new location
RUN cd /tmp && cp -r /app . && cd app && bal build && cp -r target /app/ || bal build

# Expose port
EXPOSE 9090

# Health check
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:9090/health || exit 1

# Start development server with auto-reload
CMD ["bal", "run", "--debug", "9091"]
